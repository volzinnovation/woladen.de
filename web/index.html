<!doctype html>
<html lang="de">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"
    />
    <title>woladen.de | Ladestationen & Amenities</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300;400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
      integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY="
      crossorigin=""
    />
    <link rel="stylesheet" href="./styles.css" />
  </head>
  <body>
    <div id="app" class="app-shell">
      <!-- MAIN VIEWS -->
      <main class="viewport">
        <!-- MAP VIEW -->
        <div id="view-map" class="view hidden">
          <div id="map"></div>

          <!-- Floating Controls for Map -->
          <div class="map-controls-overlay">
            <div class="search-bar">
              <button
                id="btn-locate"
                class="icon-btn"
                aria-label="Mein Standort"
              >
                <svg
                  width="20"
                  height="20"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                >
                  <path d="M12 2L12 22M2 12L22 12" opacity="0.3" />
                  <circle cx="12" cy="12" r="4" />
                </svg>
              </button>
              <div class="filter-summary" id="filter-trigger">
                <span id="filter-label">Alle Filter</span>
                <svg
                  width="16"
                  height="16"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                >
                  <path
                    d="M4 21v-7m0-4V3m8 18v-9m0-4V3m8 18v-5m0-4V3M1 14h6m2-6h6m2 8h6"
                  />
                </svg>
              </div>
            </div>
          </div>
        </div>

        <!-- LIST VIEW -->
        <div id="view-list" class="view active">
          <header class="view-header">
            <h2>Schnelllader in der N√§he</h2>
            <div class="header-actions">
              <button id="btn-list-filter" class="text-btn">Filter</button>
            </div>
          </header>
          <div id="charger-list" class="list-container">
            <!-- Cards injected here -->
            <div class="loading-state">Lade Lades√§ulen...</div>
          </div>
        </div>

        <!-- FAVORITES VIEW -->
        <div id="view-favorites" class="view hidden">
          <header class="view-header">
            <h2>Favoriten</h2>
          </header>
          <div id="favorites-list" class="list-container">
            <div class="empty-state">Noch keine Favoriten gespeichert.</div>
          </div>
        </div>

        <!-- INFO VIEW -->
        <div id="view-info" class="view hidden">
          <header class="view-header">
            <h2>Info & Hilfe</h2>
          </header>
          <div class="content-container">
            <div class="info-card">
              <h3>√úber woladen.de</h3>
              <p>
                Finde Schnelllader mit der besten Aufenthaltsqualit√§t. Wir
                zeigen dir, wo es sich lohnt zu laden. Ohne Ladeweile.
              </p>
              <div id="app-meta" class="meta-block"></div>
            </div>

            <div class="info-card">
              <h3>Legende</h3>
              <ul class="legend-list">
                <li><span class="dot gold"></span> >10 Amenities (Gold)</li>
                <li><span class="dot silver"></span> >5 Amenities (Silber)</li>
                <li><span class="dot bronze"></span> >1 Amenity (Bronze)</li>
                <li><span class="dot grey"></span> Keine Amenities</li>
              </ul>
            </div>

            <div class="info-card">
              <h3>Kontakt & Code</h3>
              <p>
                Entwickelt von Prof. Dr. Raphael Volz <br />
                (Hochschule Pforzheim).<br />
                <a href="mailto:raphael.volz@hs-pforzheim.de"
                  >raphael.volz@hs-pforzheim.de</a
                >
              </p>
              <p class="data-source-note">
                Datenquellen:<br />‚Ä¢ BNetzA Lades√§ulenregister<br />‚Ä¢
                OpenStreetMap
              </p>
              <a
                href="https://github.com/volzinnovation/woladen.de"
                target="_blank"
                class="link-btn"
                >GitHub Projekt</a
              >
            </div>
          </div>
        </div>
      </main>

      <!-- NAVIGATION BAR -->
      <nav class="bottom-nav">
        <button class="nav-item active" data-target="view-list">
          <svg
            class="nav-icon"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
          >
            <line x1="8" y1="6" x2="21" y2="6"></line>
            <line x1="8" y1="12" x2="21" y2="12"></line>
            <line x1="8" y1="18" x2="21" y2="18"></line>
            <line x1="3" y1="6" x2="3.01" y2="6"></line>
            <line x1="3" y1="12" x2="3.01" y2="12"></line>
            <line x1="3" y1="18" x2="3.01" y2="18"></line>
          </svg>
          <span>Liste</span>
        </button>
        <button class="nav-item" data-target="view-map">
          <svg
            class="nav-icon"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
          >
            <polygon
              points="1 6 1 22 8 18 16 22 23 18 23 2 16 6 8 2 1 6"
            ></polygon>
            <line x1="8" y1="2" x2="8" y2="18"></line>
            <line x1="16" y1="6" x2="16" y2="22"></line>
          </svg>
          <span>Karte</span>
        </button>
        <button class="nav-item" data-target="view-favorites">
          <svg
            class="nav-icon"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
          >
            <polygon
              points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"
            ></polygon>
          </svg>
          <span>Favoriten</span>
        </button>
        <button class="nav-item" data-target="view-info">
          <svg
            class="nav-icon"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
          >
            <circle cx="12" cy="12" r="10"></circle>
            <line x1="12" y1="16" x2="12" y2="12"></line>
            <line x1="12" y1="8" x2="12.01" y2="8"></line>
          </svg>
          <span>Info</span>
        </button>
      </nav>

      <!-- FILTER MODAL (Overlay) -->
      <div id="modal-filter" class="modal-overlay hidden">
        <div class="modal-content bottom-sheet">
          <header class="modal-header">
            <h3>Filter</h3>
            <button class="close-btn" data-close="modal-filter">&times;</button>
          </header>
          <div class="modal-body">
            <label class="filter-group">
              <span class="label-text">Betreiber</span>
              <select id="filter-operator">
                <option value="">Alle Betreiber</option>
              </select>
            </label>

            <label class="filter-group">
              <span class="label-text"
                >Min. Leistung: <span id="filter-power-val">50</span> kW</span
              >
              <input
                type="range"
                id="filter-power"
                min="50"
                max="350"
                step="50"
                value="50"
              />
              <div class="range-labels">
                <span>50</span><span>150</span><span>300+</span>
              </div>
            </label>

            <div class="filter-group">
              <span class="label-text">Amenities</span>
              <div id="filter-amenities" class="amenity-grid">
                <!-- Icons injected by JS -->
              </div>
            </div>
          </div>
          <footer class="modal-footer">
            <button id="btn-apply-filter" class="primary-btn">Anwenden</button>
          </footer>
        </div>
      </div>

      <!-- DETAIL MODAL -->
      <div id="modal-detail" class="modal-overlay hidden">
        <div class="modal-content full-sheet">
          <button class="close-btn-float" data-close="modal-detail">
            <svg
              width="24"
              height="24"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
            >
              <line x1="18" y1="6" x2="6" y2="18"></line>
              <line x1="6" y1="6" x2="18" y2="18"></line>
            </svg>
          </button>

          <div class="detail-hero">
            <div id="detail-map" class="detail-mini-map"></div>
          </div>

          <div class="detail-body">
            <div class="detail-header">
              <h2 id="detail-title">Operator Name</h2>
              <button
                id="btn-toggle-fav"
                class="fav-btn-round"
                aria-label="Favorit"
              >
                <svg
                  width="24"
                  height="24"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                >
                  <polygon
                    points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"
                  ></polygon>
                </svg>
              </button>
            </div>

            <p id="detail-address" class="detail-address">
              Musterstra√üe 1, 12345 Berlin
            </p>

            <div class="detail-stats">
              <div class="stat-pill">
                <span class="icon">‚ö°</span>
                <span id="detail-power">150 kW</span>
              </div>
              <div class="stat-pill">
                <span class="icon">üè™</span>
                <span id="detail-amenity-count">5 Amenities</span>
              </div>
            </div>

            <div class="detail-actions">
              <a
                id="btn-nav-google"
                href="#"
                target="_blank"
                class="action-btn"
              >
                Google Navi
              </a>
              <a
                id="btn-nav-apple"
                href="#"
                target="_blank"
                class="action-btn secondary"
              >
                Apple Navi
              </a>
            </div>

            <div class="amenity-list-section">
              <h3>In der N√§he</h3>
              <div id="detail-amenities-list" class="amenity-list">
                <!-- List items -->
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <script
      src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
      integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo="
      crossorigin=""
    ></script>
    <script src="./app.js" type="module"></script>
  </body>
</html>
